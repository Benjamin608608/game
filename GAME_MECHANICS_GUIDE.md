# 阿瓦隆完整遊戲機制指南 ⚔️

## 🎯 最新更新內容

### ✅ 已實現的核心機制

1. **角色名稱修正**：佩西瓦爾 → 派希維爾
2. **完整投票系統**：隊伍投票 + 任務投票
3. **湖中女神機制**：任務後的身份查看
4. **房主角色自定義**：可選擇遊戲角色配置

## 🗳️ 投票機制詳解

### 隊伍投票階段
1. **隊長選擇**：當前隊長選擇執行任務的隊員
2. **全員投票**：所有玩家對隊伍組成投票（贊成/反對）
3. **通過條件**：贊成票數 **嚴格大於** 總人數的一半
4. **失敗後果**：連續5次拒絕隊伍，邪惡陣營直接獲勝

#### 投票規則示例
- 6人遊戲：需要至少4票贊成（4 > 6/2 = 3）
- 7人遊戲：需要至少4票贊成（4 > 7/2 = 3.5）
- 8人遊戲：需要至少5票贊成（5 > 8/2 = 4）

### 任務投票階段
1. **隊員投票**：只有被選中的隊員可以投票
2. **投票選項**：成功 或 失敗
3. **結果判定**：根據失敗票數和任務要求決定成敗

## 🏔️ 湖中女神機制

### 觸發條件
- **任務2完成後**：第一次湖中女神
- **任務3完成後**：第二次湖中女神
- **可選功能**：房主可在角色選擇時啟用/禁用

### 使用流程
1. **隨機選擇持有者**：系統隨機選擇一名玩家持有湖中女神
2. **選擇查看目標**：持有者選擇想要查看的玩家
3. **查看結果**：只有持有者能看到目標的陣營（好人/邪惡）
4. **傳遞卡片**：查看後湖中女神傳遞給被查看的玩家

### 戰略意義
- **情報收集**：好人可以獲得確定的陣營信息
- **混淆視聽**：邪惡角色可以利用信息誤導他人
- **身份推理**：增加遊戲的策略深度

## 🎮 完整遊戲流程

```
開始遊戲
    ↓
角色分配與確認
    ↓
┌─→ 隊長選擇隊員
│       ↓
│   全員隊伍投票
│       ↓
│   [通過] → 隊員任務投票 → 任務結果
│       ↓                      ↓
│   [拒絕] ←─────────────────────┤
│       ↓                      ↓
│   換下個隊長              [任務2/3後]
│       ↓                      ↓
└───────┘                 湖中女神階段
                               ↓
                          檢查勝利條件
                               ↓
                        [繼續] → 下個任務
                               ↓
                        [結束] → 刺殺階段
```

## 🎯 房主功能

### 角色自定義選擇
1. **必選角色**：梅林、刺客、莫德雷德
2. **可選角色**：派希維爾、摩甘娜、奧伯倫
3. **數量調整**：亞瑟忠臣、爪牙數量
4. **平衡驗證**：自動檢查角色配置合理性

### 遊戲選項
- **湖中女神**：可選擇啟用或禁用
- **預設模式**：使用標準角色配置
- **自定義模式**：完全自由的角色搭配

## 📱 使用說明

### 多人在線遊戲
1. **房主創建房間**：設定4位數房間號
2. **其他玩家加入**：輸入房間號加入遊戲
3. **選擇遊戲模式**：
   - 點擊「開始遊戲」使用預設角色
   - 點擊「選擇角色」自定義配置
4. **遊戲進行**：按照完整流程進行遊戲

### 投票操作
- **隊伍投票**：所有玩家看到隊伍組成後投票
- **任務投票**：被選中的隊員決定任務成敗
- **實時狀態**：顯示當前投票進度

### 湖中女神操作
- **持有者選擇**：點擊想要查看的玩家
- **結果查看**：只有持有者能看到結果
- **確認繼續**：點擊確認按鈕繼續遊戲

## 🎊 完整特色

✅ **符合官方規則**：完全按照阿瓦隆官方規則實現
✅ **智能驗證**：自動檢查遊戲配置和規則
✅ **實時同步**：所有玩家遊戲狀態即時更新
✅ **美觀界面**：專業的遊戲界面設計
✅ **多設備支援**：手機、平板、電腦都能完美使用

現在您擁有一個完全符合官方阿瓦隆規則的線上遊戲！🎉
